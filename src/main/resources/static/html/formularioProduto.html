<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>

    <script src="jquery-3.5.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!-- Novos imports -->
    <link rel="stylesheet" type="text/css" href="..css/formularioProduto.css">
    <link rel="stylesheet" type="text/css" href="../Dashboard/bibliotecas/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../Dashboard/bibliotecas/font-awesome/css/font-awesome.min.css">
    <link href="../Dashboard/fontawesome-free-5.15.3-web/css/all.css" rel="stylesheet">
    <link rel="stylesheet" href="../Dashboard/css/sb-admin.min.css">

    <script src="/Dashboard/bibliotecas/jquery/jquery.min.js"></script>
    <script src="/Dashboard/bibliotecas/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/Dashboard/bibliotecas/jquery-easing/jquery.easing.min.js"></script>
    <script src="/Dashboard/js/sb-admin.min.js" type="text/javascript"></script>

    <title>Cadastro de Produto</title>

</head>

<body>
<div class="container">
    <h1>Cadastro de Produto</h1>
    <form th:action="@{/produtos/save}" method="post" enctype="multipart/form-data">
        <div class="row">
            <label>Logo</label>
            <input class="form-control" type="file" name="arquivoImagem" id="arquivoImagem"
                   accept="image/png, image/jpeg"
                   required/>
        </div>
        <div class="row">
            <label>Nome</label>
            <input class="form-control" name="nome" type="text" required="true" maxlength="280" min="3"> <br>
        </div>

        <div class="row">
            <label>Nome Extenso</label>
            <textarea class="form-control" rows="3" type="text" name="descricao" maxlength="2000"
                      class="materialize-textarea"
                      required="true"></textarea>
        </div>

        <div class="row">
            <label>QTD estrelas</label>
            <input class="form-control" type="text" name="estrelas"
                   onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                   required="true">
            <!-- Avaliar necessidade, isso já pode ser feito no próprio construtor Java -->
            <input value="Ativo" name="status" type="hidden">
        </div>
        <div class="row">
            <label>Categoria</label>
            <select class="form-control" name="categoria" required="true">
                <option value="" disabled selected>Selecione</option>
                <option value="Aquaticos">Aquaticos</option>
                <option value="Basquete">Basquete</option>
                <option value="Fitness">Fitness</option>
                <option value="Futebol">Futebol</option>
                <option value="Marciais">Marciais</option>
                <option value="Volei">Volei</option>
            </select>
        </div>
        <br>
        <div class="row">
            <label>Qtd estoque</label>
            <input class="form-control" name="quantidade"
                   onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                   required="true" type="text"/>
        </div>
        <div class="row">
            <label>Preço</label>
            <input class="form-control" name="preco"
                   onkeypress="return event.charCode >= 48 && event.charCode <= 57 || event.charCode == 46"
                   required="true" pattern="^\d*(\.\d{0,2})?$" type="text"/>
        </div>
        <br>
        <button class="btn btn-primary" type="submit" id="btn-salvar">Salvar Produto</button>
    </form>
</div>

</body>
<script type="text/javascript">
        $(document).ready(function() {
            $('select').formSelect();
        });

        $(document).ready(function() {
            $('#arquivoImagem').change(function() {
                showImageThumbnail(this);
            });
        });

        function showImageThumbnail(fileInput) {
            file = fileInput.files[0];
            reader = new FileReader();

            reader.onload = function(e) {
                $('#thumbnail').attr('src', e.target.result);
            };
            reader.readAsDataURL(file);
        }
</script>

</html>